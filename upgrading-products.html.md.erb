---
title: Upgrading Elastic Runtime and Other Pivotal Cloud Foundry&reg; Products
owner: RelEng
---

<style>
    .note.warning {
        background-color: #fdd;
        border-color: #fbb
    }

    .note.warning:before {
        color: #f99;
     }
</style>
 
<strong><%= modified_date %></strong>

This topic describes how to upgrade Elastic Runtime (ERT) and other product tiles alone, without upgrading Ops Manager. For example, you might need to do this if a security update for ERT is released or if new features are introduced in a point release of a product tile.

The topic [Upgrading Pivotal Cloud Foundry](./upgrading-pcf.html) describes how to perform a complete upgrade of PCF, including Ops Manager, ERT and other installed products. 

## <a id="runtime_snapshot"></a>Elastic Runtime Snapshot ##
<dl>
<dt>Current Pivotal Cloud Foundry&reg; Elastic Runtime Details</dt>
<dd><strong>Version</strong>: 1.6.0</dd>
<dd><strong>Release Date</strong>: 23 October 2015</dd>
<dd><strong>Software component version</strong>: Cloud Foundry 222</dd>
<dd><strong>Compatible Ops Manager Version(s)</strong>: 1.6.x</dd>
<dd><strong>vSphere support?</strong> Yes</dd>
<dd><strong>AWS support?</strong> Yes</dd>
<dd><strong>OpenStack support?</strong> Yes</dd>
</dl>

## <a id="runtime_upgrade"></a>Upgrading Elastic Runtime

Refer to the [Product Version Matrix](../../compatibility-matrix.pdf) before upgrading Elastic Runtime for Pivotal Cloud Foundry&reg;.

<p class="note"><strong>Note</strong>: Before you upgrade to Ops Manager 1.7.x, you must first upgrade PCF Elastic Runtime to version 1.6.9 or higher. </p>

<p class="note warning">
<strong>WARNING: </strong> Pivotal Cloud Foundry 1.7 does not support PostgreSQL databases. During an upgrade from PCF version 1.6 to 1.7, data from the UAA and Cloud Controller Postgres databases automatically migrate to MySQL. This temporarily disables login through the UAA and SSO and may cause data loss if you have not prepared your databases. If your installation uses Postgres, see <a href="#aboutpostgres">About Postgres Databases During PCF Upgrade</a>.</p>

### Install using the Pivotal Operations Manager

To install Elastic runtime for PCF without upgrading Ops Manager, follow the procedure for installing Pivotal Cloud Foundry&reg; Operations Manager tiles:

1. Download the product file from [Pivotal Network](https://network.pivotal.io/).
1. Upload the product file to your Ops Manager installation.
1. Click **Add** next to the uploaded product description in the Available Products view to add this product to your staging area.
1. Click the newly added tile to review any configurable options.
1. Click **Apply Changes** to install the service.

##<a id="other-products"></a>Upgrading PCF Products ##


**Important**: Read the Known Issues section of the [Pivotal Cloud Foundry&reg; Release Notes](../pcf-release-notes/index.html) before getting started.

This section describes how to upgrade individual products like Pivotal Cloud Foundry&reg; Elastic Runtime,
[Pivotal MySQL](https://network.pivotal.io/products/p-mysql), or [RabbitMQ](https://network.pivotal.io/products/pivotal-rabbitmq-service) in your [Pivotal Cloud Foundry&reg;](https://network.pivotal.io/products/pivotal-cf) (PCF) deployment.

<p class="note"><strong>Note</strong>: To upgrade your PCF product to a target release, you must install all releases from your currently deployed version to the target version in sequential order. For example, if your deployment uses Elastic Runtime release 1.5 and you are upgrading to 1.7, you must sequentially install 1.6 and 1.7.</p>

1. Browse to [Pivotal Network](https://network.pivotal.io/) and sign in.

1. Download the latest PCF release for the product or products you want
to upgrade. Every product is tied to exactly one stemcell. Download the stemcell that matches your product and version.

1. <%= partial "check_disk_before_upgrade" %>

1. Browse to the Pivotal Cloud Foundry&reg; Operations Manager web interface and click **Import a Product**.

    <%= image_tag("import.png") %>

	<p class="note"><strong>Note</strong>: As of release 1.4.0.0, Pivotal Ops Manager no longer supports older versions of PCF products. You must update all products to at least version 1.2 (except for RabbitMQ, which must be updated to at least version 1.3.4.0) before importing them into Ops Manager 1.4.0.0.
	</p>

1. Upload the new version of a product you want to upgrade.

1. Under **Available Products**, click **Upgrade** for the uploaded product.

1. Repeat the import, upload, and **Upgrade** steps for each product you
downloaded.

1. If you are upgrading a product that uses a self-signed certificate from version 1.1 to 1.2, you must configure the product to trust the self-signed certificate.

    To do this:
    * Click the product tile.
    * In the left-hand column, select the setting page containing the SSL
    certificate configuration. For example, for Elastic Runtime, select
    the **HAProxy** page.
    * Check the **Trust Self-Signed Certificates** box.
    * Click **Save**.

1. Click **Apply changes**.

## <a id="aboutpostgres"></a>About Postgres Databases During PCF Upgrade ##

If your PCF v. 1.6 installation uses Postgres databases, upgrading Elastic Runtime to 1.7 automatically migrates your Cloud Controller and UAA databases from Postgres to MySQL. To avoid data loss during migration, you need to temporarily scale your databases to store their data in both Postgres and MySQL. See [Prepare Databases and Apps for Upgrade](./upgrading-pcf.html#prepare-db) for instructions.

The Cloud Controller and UAA databases are also inaccessible during the migration. This means that you temporarily cannot log in through the UAA or use Single Sign-On (SSO).

To migrate the UAA and Cloud Controller databases from Postgres to MySQL, the upgrade process changes the database port number to prevent writing to the Postgres databases. A PHP app colocated on each database VM then copies the Postgres contents to the MySQL cluster, and the two databases are then reconfigured to point to MySQL instead of Postgres.

<p class="note"><strong>Note</strong>: The Apps Manager 1.6 also uses a small Postgres database to store temporary email invitations. Upgrading destroys this non-critical data.</p>


